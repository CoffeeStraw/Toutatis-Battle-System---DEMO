[gd_scene load_steps=6 format=2]

[ext_resource path="res://characters/player/sword/sword.escn" type="PackedScene" id=1]
[ext_resource path="res://characters/player/sword/motion_trail.gd" type="Script" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Area

var local_collision_pos

\"\"\"
# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.

func _integrate_forces( state ):
	if(state.get_contact_count() >= 1):  #this check is needed or it will throw errors 
		local_collision_pos = state.get_contact_local_pos(0)

func _on_Area_body_entered(body):
	var collision_position = local_collision_pos + get_translation()
	print(collision_position)
\"\"\""

[sub_resource type="CapsuleShape" id=2]

[sub_resource type="SpatialMaterial" id=3]
flags_transparent = true
flags_unshaded = true
vertex_color_use_as_albedo = true
params_cull_mode = 2

[node name="Scene Root" index="0" instance=ExtResource( 1 )]

[node name="Sword" parent="." index="0"]
transform = Transform( 0.541801, 0, 0, 0, 0.541801, 0, 0, 0, 1, 0, 0, 0.07 )

[node name="Area" type="Area" parent="." index="1"]
collision_layer = 4
collision_mask = 8
script = SubResource( 1 )

[node name="CollisionShape" type="CollisionShape" parent="Area" index="0"]
transform = Transform( 0.18963, 0, 0, 0, -1.6578e-009, -0.720595, 0, 0.07, -5.81361e-008, 0, 0, 0 )
shape = SubResource( 2 )

[node name="Trail" type="Spatial" parent="." index="2"]
transform = Transform( -4.37114e-008, -1, 0, 1, -4.37114e-008, 0, 0, 0, 1, 0, 0, 0 )

[node name="ImmediateGeometry" type="ImmediateGeometry" parent="Trail" index="0"]
material_override = SubResource( 3 )
script = ExtResource( 2 )
fromWidth = 1.1
scaleAcceleration = 1.3
lifespan = 0.1
startColor = Color( 1, 1, 1, 0.313726 )
endColor = Color( 1, 1, 1, 0.00392157 )
[connection signal="body_entered" from="Area" to="Area" method="_on_Area_body_entered"]
